import{_ as m,J as C,a as w,o as c,c as i,F as y,e as $,C as u,t as _,n as D,m as I,I as b,K as F,b as v,r as k,d as g,u as p,y as N}from"./index-DSTqDC5A.js";const V=C({name:"RenderItems",props:{items:{type:Array,required:!0},parentIndex:{type:Array,default:[]},parentName:String},setup(t,{emit:a}){const d=k(t.items.map(s=>(console.log("({...item, show: false}))",s,s.name),{...s,name:s.name,kind:s.kind,show:!1})));return console.log("data",d),{data:d,handleClick:(s,r)=>{r&&r.kind==="directory"?r.show=!r.show:a("click",s)}}}}),x={class:"file-list"},A=["onClick"],B=["onClick"];function S(t,a,d,h,s,r){const e=w("render-items");return c(),i("div",x,[(c(!0),i(y,null,$(t.data,(n,l)=>(c(),i("div",{key:l,class:"file-item"},[n.kind==="file"?(c(),i("div",{key:0,class:"file-item-file",onClick:u(f=>t.handleClick([...t.parentIndex,l],n),["stop"])}," 文件: "+_(n.name),9,A)):(c(),i("div",{key:1,class:D(["file-item-directory",{active:n.show}]),onClick:u(f=>t.handleClick([...t.parentIndex,l],n),["stop"])},[I(" 文件夹: "+_(n.name)+" ",1),b(v(e,{class:"file-list-child",items:n.children,"parent-index":[...t.parentIndex,l],"parent-name":n.name,onClick:t.handleClick},null,8,["items","parent-index","parent-name","onClick"]),[[F,n.children&&n.show]])],10,B))]))),128))])}const H=m(V,[["render",S],["__scopeId","data-v-0548c817"]]),P={class:"ifrname-box box"},R={key:0,class:"box-info"},T={class:"content"},q={__name:"index",setup(t){const a=k([]),d=async e=>{if(e.kind==="file")return e;e.children=[];const n=await e.entries();for await(const l of n){console.log("info",l);const f=await d(l[1]);e.children.push(f)}return e},h=async()=>{try{const e=await showDirectoryPicker();a.value=await d(e),console.log("root.value",a.value)}catch(e){console.log("err",e)}},s=k(""),r=async e=>{console.log("index",e);let n=a.value;for(let o=0;o<e.length;o++)console.log("i, index.length",o,e.length,e[o]),console.log("fileData[index[i]]",n[e[o]]),o<e.length-1?n=n[e[o]].children:n=n[e[o]],console.log("fileData:",n);console.log("fileData--------------",n);const l=await n.getFile(),f=new FileReader;f.onload=o=>{console.log("e",o),console.log("e.target.result",o.target.result),s.value=o.target.result},f.readAsText(l,"utf-8")};return(e,n)=>(c(),i("div",P,[g("button",{onClick:u(h,["stop"])},"获取文件夹"),p(a)&&p(a).children&&p(a).children.length?(c(),i("div",R,[v(H,{class:"file",items:p(a).children,onClick:r},null,8,["items"]),g("div",T,_(p(s)),1)])):N("",!0)]))}},E=m(q,[["__scopeId","data-v-2eb59204"]]);export{E as default};
