import{_ as y,J as w,a as g,o as l,c as i,F as $,e as b,C as h,t as _,n as I,m as F,I as D,K as N,b as v,y as C,r as k,d as m,u as p}from"./index-CeI5JRgj.js";const x=w({name:"RenderItems",props:{items:{type:Array,required:!0},parentIndex:{type:Array,default:[]},parentName:String},setup(s,{emit:n}){return{data:k(s.items.map(r=>({...r,show:!1}))),handleClick:(r,c)=>{c&&c.type==="directory"?c.show=!c.show:n("click",r)}}}}),V={class:"file-list"},A=["onClick"],B=["onClick"];function S(s,n,f,u,r,c){const t=g("render-items");return l(),i("div",V,[(l(!0),i($,null,b(s.data,(e,o)=>(l(),i("div",{key:o,class:"file-item"},[e.type==="file"?(l(),i("div",{key:0,class:"file-item-file",onClick:h(d=>s.handleClick([...s.parentIndex,o],e),["stop"])}," 文件: "+_(e.name),9,A)):e.type==="directory"?(l(),i("div",{key:1,class:I(["file-item-directory",{active:e.show}]),onClick:h(d=>s.handleClick([...s.parentIndex,o],e),["stop"])},[F(" 文件夹: "+_(e.name)+" ",1),D(v(t,{class:"file-list-child",items:e.children,"parent-index":[...s.parentIndex,o],"parent-name":e.name,onClick:s.handleClick},null,8,["items","parent-index","parent-name","onClick"]),[[N,e.children&&e.show]])],10,B)):C("",!0)]))),128))])}const H=y(x,[["render",S],["__scopeId","data-v-8cc21e34"]]),P={class:"ifrname-box box"},R={key:0,class:"box-info"},T={class:"content"},q={__name:"index",setup(s){const n=k([]),f=async t=>{if(t.kind==="file")return t;t.children=[];const e=await t.entries();for await(const o of e){console.log("info",o);const d=await f(o[1]);t.children.push(d)}return t},u=async()=>{try{const t=await showDirectoryPicker();n.value=await f(t),console.log("root.value",n.value)}catch(t){console.log("err",t)}},r=k(""),c=async t=>{let e=n.value;for(let a=0;a<t.length;a++)a<t.length-1?e=e[t[a]].children:e=e[t[a]];const o=await e.getFile(),d=new FileReader;d.onload=a=>{console.log("e",a),console.log("e.target.result",a.target.result),r.value=a.target.result},d.readAsText(o,"utf-8")};return(t,e)=>(l(),i("div",P,[m("button",{onClick:h(u,["stop"])},"获取文件夹"),p(n)&&p(n).children&&p(n).children.length?(l(),i("div",R,[v(H,{class:"file",items:p(n).children,onClick:c},null,8,["items"]),m("div",T,_(p(r)),1)])):C("",!0)]))}},E=y(q,[["__scopeId","data-v-b4ec44ba"]]);export{E as default};
