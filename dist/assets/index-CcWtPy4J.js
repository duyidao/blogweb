import{_ as y,J as C,a as w,o as i,c as d,F as g,e as $,C as h,t as _,n as I,m as b,I as F,K as D,b as v,y as N,r as k,d as u,u as m}from"./index-BK9px7Wf.js";const x=C({name:"RenderItems",props:{items:{type:Array,required:!0},parentIndex:{type:Array,default:[]},parentName:String},setup(s,{emit:a}){return{data:k(s.items.map(r=>({...r,show:!1}))),handleClick:(r,c)=>{c&&c.type==="directory"?c.show=!c.show:a("click",r)}}}}),V={class:"file-list"},A=["onClick"],B=["onClick"];function S(s,a,p,f,r,c){const t=w("render-items");return i(),d("div",V,[(i(!0),d(g,null,$(s.data,(e,n)=>(i(),d("div",{key:n,class:"file-item"},[e.type==="file"?(i(),d("div",{key:0,class:"file-item-file",onClick:h(l=>s.handleClick([...s.parentIndex,n],e),["stop"])}," 文件: "+_(e.name),9,A)):e.type==="directory"?(i(),d("div",{key:1,class:I(["file-item-directory",{active:e.show}]),onClick:h(l=>s.handleClick([...s.parentIndex,n],e),["stop"])},[b(" 文件夹: "+_(e.name)+" ",1),F(v(t,{class:"file-list-child",items:e.children,"parent-index":[...s.parentIndex,n],"parent-name":e.name,onClick:s.handleClick},null,8,["items","parent-index","parent-name","onClick"]),[[D,e.children&&e.show]])],10,B)):N("",!0)]))),128))])}const H=y(x,[["render",S],["__scopeId","data-v-8cc21e34"]]),P={class:"ifrname-box box"},R={class:"box-info"},T={class:"content"},q={__name:"index",setup(s){const a=k([]),p=async t=>{if(t.kind==="file")return t;t.children=[];const e=await t.entries();for await(const n of e){console.log("info",n);const l=await p(n[1]);t.children.push(l)}return t},f=async()=>{try{const t=await showDirectoryPicker();a.value=await p(t),console.log("root.value",a.value)}catch(t){console.log("err",t)}},r=k(""),c=async t=>{let e=a.value;for(let o=0;o<t.length;o++)o<t.length-1?e=e[t[o]].children:e=e[t[o]];const n=await e.getFile(),l=new FileReader;l.onload=o=>{console.log("e",o),console.log("e.target.result",o.target.result),r.value=o.target.result},l.readAsText(n,"utf-8")};return(t,e)=>(i(),d("div",P,[u("button",{onClick:h(f,["stop"])},"获取文件夹"),u("div",R,[v(H,{class:"file",items:m(a),onClick:c},null,8,["items"]),u("div",T,_(m(r)),1)])]))}},E=y(q,[["__scopeId","data-v-55211cbf"]]);export{E as default};
