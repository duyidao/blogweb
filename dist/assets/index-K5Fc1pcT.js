import{_ as m,K as w,r as u,b as C,o as c,c as i,F as y,f as $,E as _,j as k,n as D,v as b,J as F,L as I,d as v,e as g,u as h,A as N}from"./index-BGh0r5GR.js";const A=w({name:"RenderItems",props:{items:{type:Array,required:!0},parentIndex:{type:Array,default:[]},parentName:String},setup(t,{emit:a}){const d=u(t.items.map(s=>(console.log("({...item, show: false}))",s,s.name),{...s,name:s.name,kind:s.kind,show:!1})));return console.log("data",d),{data:d,handleClick:(s,r)=>{r&&r.kind==="directory"?r.show=!r.show:a("click",s)}}}}),V={class:"file-list"},x=["onClick"],B=["onClick"];function S(t,a,d,p,s,r){const n=C("render-items");return c(),i("div",V,[(c(!0),i(y,null,$(t.data,(e,l)=>(c(),i("div",{key:l,class:"file-item"},[e.kind==="file"?(c(),i("div",{key:0,class:"file-item-file",onClick:_(f=>t.handleClick([...t.parentIndex,l],e),["stop"])}," 文件: "+k(e.name),9,x)):(c(),i("div",{key:1,class:D(["file-item-directory",{active:e.show}]),onClick:_(f=>t.handleClick([...t.parentIndex,l],e),["stop"])},[b(" 文件夹: "+k(e.name)+" ",1),F(v(n,{class:"file-list-child",items:e.children,"parent-index":[...t.parentIndex,l],"parent-name":e.name,onClick:t.handleClick},null,8,["items","parent-index","parent-name","onClick"]),[[I,e.children&&e.show]])],10,B))]))),128))])}const E=m(A,[["render",S],["__scopeId","data-v-df6c58e4"]]),H={class:"ifrname-box box"},L={key:0,class:"box-info"},P={class:"content"},R={__name:"index",setup(t){const a=u([]),d=async n=>{if(n.kind==="file")return n;n.children=[];const e=await n.entries();for await(const l of e){console.log("info",l);const f=await d(l[1]);n.children.push(f)}return n},p=async()=>{try{const n=await showDirectoryPicker();a.value=await d(n),console.log("root.value",a.value)}catch(n){console.log("err",n)}},s=u(""),r=async n=>{console.log("index",n);let e=a.value.children;console.log("fileData:-----------begin",e);for(let o=0;o<n.length;o++)console.log("i, index.length",o,n.length,n[o]),console.log("fileData[index[i]]",e[n[o]]),o<n.length-1?e=e[n[o]].children:e=e[n[o]],console.log("fileData:",e);console.log("fileData:------------after",e);const l=await e.getFile(),f=new FileReader;f.onload=o=>{console.log("e",o),console.log("e.target.result",o.target.result),s.value=o.target.result},f.readAsText(l,"utf-8")};return(n,e)=>(c(),i("div",H,[g("button",{onClick:_(p,["stop"])},"获取文件夹"),h(a)&&h(a).children&&h(a).children.length?(c(),i("div",L,[v(E,{class:"file",items:h(a).children,onClick:r},null,8,["items"]),g("div",P,k(h(s)),1)])):N("",!0)]))}},j=m(R,[["__scopeId","data-v-68e38356"]]);export{j as default};
