import{_ as v,J as C,a as w,o as c,c as i,F as g,e as $,C as h,t as _,n as I,m as b,I as F,K as D,b as y,r as k,d as m,u as p,y as N}from"./index-CsMNwn3R.js";const x=C({name:"RenderItems",props:{items:{type:Array,required:!0},parentIndex:{type:Array,default:[]},parentName:String},setup(t,{emit:o}){const d=k(t.items.map(s=>(console.log("({...item, show: false}))",s,s.name),{...s,name:s.name,kind:s.kind,show:!1})));return console.log("data",d),{data:d,handleClick:(s,l)=>{l&&l.type==="directory"?l.show=!l.show:o("click",s)}}}}),V={class:"file-list"},A=["onClick"],B=["onClick"];function S(t,o,d,u,s,l){const n=w("render-items");return c(),i("div",V,[(c(!0),i(g,null,$(t.data,(e,a)=>(c(),i("div",{key:a,class:"file-item"},[e.kind==="file"?(c(),i("div",{key:0,class:"file-item-file",onClick:h(f=>t.handleClick([...t.parentIndex,a],e),["stop"])}," 文件: "+_(e.name),9,A)):(c(),i("div",{key:1,class:I(["file-item-directory",{active:e.show}]),onClick:h(f=>t.handleClick([...t.parentIndex,a],e),["stop"])},[b(" 文件夹: "+_(e.name)+" ",1),F(y(n,{class:"file-list-child",items:e.children,"parent-index":[...t.parentIndex,a],"parent-name":e.name,onClick:t.handleClick},null,8,["items","parent-index","parent-name","onClick"]),[[D,e.children&&e.show]])],10,B))]))),128))])}const H=v(x,[["render",S],["__scopeId","data-v-05fd3b3f"]]),P={class:"ifrname-box box"},R={key:0,class:"box-info"},T={class:"content"},q={__name:"index",setup(t){const o=k([]),d=async n=>{if(n.kind==="file")return n;n.children=[];const e=await n.entries();for await(const a of e){console.log("info",a);const f=await d(a[1]);n.children.push(f)}return n},u=async()=>{try{const n=await showDirectoryPicker();o.value=await d(n),console.log("root.value",o.value)}catch(n){console.log("err",n)}},s=k(""),l=async n=>{let e=o.value;for(let r=0;r<n.length;r++)r<n.length-1?e=e[n[r]].children:e=e[n[r]];const a=await e.getFile(),f=new FileReader;f.onload=r=>{console.log("e",r),console.log("e.target.result",r.target.result),s.value=r.target.result},f.readAsText(a,"utf-8")};return(n,e)=>(c(),i("div",P,[m("button",{onClick:h(u,["stop"])},"获取文件夹"),p(o)&&p(o).children&&p(o).children.length?(c(),i("div",R,[y(H,{class:"file",items:p(o).children,onClick:l},null,8,["items"]),m("div",T,_(p(s)),1)])):N("",!0)]))}},E=v(q,[["__scopeId","data-v-0ecd7fcc"]]);export{E as default};
