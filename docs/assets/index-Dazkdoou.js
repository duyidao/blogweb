import{_ as k}from"./index-D9KZYldU.js";import{_ as v,j as r,o as c,h as y,w,u as l,l as g,a as x,I as F,c as u,k as b,O as C,F as B}from"./index-DLqeNj1X.js";import V from"./file-DTqLWfVV.js";import"./index-v8mxky7W.js";const I={key:0,class:"box-info"},D={key:1,class:"loading"},N={__name:"index",setup(j){const o=r([]),d=async e=>{if(e.kind==="file")return e;e.children=[];const t=await e.entries();for await(const a of t){const n=await d(a[1]);e.children.push(n)}return e},f=r(!1),_=async()=>{try{f.value=!0;const e=await showDirectoryPicker();o.value=await d(e),f.value=!1,console.log("root.value",o.value)}catch(e){console.log("err",e)}},i=r(""),m=r("javascript"),p=r(null),h=async e=>{let t=o.value.children;for(let s=0;s<e.length;s++)s<e.length-1?t=t[e[s]].children:t=t[e[s]];const a=await t.getFile();m.value=a.type.split("/")[1]||a.name.split(".")[1];const n=new FileReader;n.onload=s=>{i.value=s.target.result,p.value.showCode=!0},n.readAsText(a,"utf-8")};return(e,t)=>{const a=k;return c(),y(a,{column:"",ref_key:"iframeBox",ref:p,class:"ifrname-box box",needCode:!1,type:l(m),title:"文件夹获取",modelValue:l(i),"onUpdate:modelValue":t[0]||(t[0]=n=>g(i)?i.value=n:null)},{default:w(()=>[x("button",{onClick:F(_,["stop"])},"获取文件夹"),l(f)?(c(),u("div",D," 加载中，请稍后... ")):(c(),u(B,{key:0},[l(o)&&l(o).children&&l(o).children.length?(c(),u("div",I,[b(V,{class:"file",items:l(o).children,onClick:h},null,8,["items"])])):C("",!0)],64))]),_:1},8,["type","modelValue"])}}},A=v(N,[["__scopeId","data-v-b2af58ba"]]);export{A as default};
