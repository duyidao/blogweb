import{_ as S}from"./index-M8MeMDs0.js";import{_ as B,d as E}from"./index-N5uH88Uw.js";import{f as U}from"./compress-DgL6_ikp.js";import{c as w}from"./effect-a2W-tOnW.js";import{r as I,C as c,P as D,o as R,a as T,q as X,s as Y,b as t,l as L,u as g,y as N,z as V}from"./vender-BxpIRFvU.js";const $=l=>(N("data-v-ef5b11cc"),l=l(),V(),l),q={class:"iframe-box box"},F={style:{display:"flex","flex-direction":"column"}},P={class:"container"},j={class:"mainboard"},A=["width","height"],G=$(()=>t("canvas",{id:"float",width:"200",height:"80"},null,-1)),H=[G],J={class:"signboard"},K={__name:"index",setup(l){let r=null,p=null,m=null,n=null,u=null,d=null;const s={baseUrl:E,size:{width:600,height:400}},h=I(0),v=I(0),_=()=>{const e=new Image;e.src=s.baseUrl,e.onload=()=>{d.drawImage(e,0,0,s.size.width,s.size.height)}};c(()=>{u=document.getElementById("main"),d=u.getContext("2d"),_()});function b(){d.drawImage(r,h.value,v.value,200,80);let e=u.toDataURL("image/png"),o=document.createElement("a");o.href=e,o.download="canvas.png",o.click()}function y(){d.clearRect(0,0,s.size.width,s.size.height),_()}c(()=>{r=document.getElementById("float"),p=r.getContext("2d")}),c(()=>{m=document.getElementById("sign"),n=m.getContext("2d")});let f=!1;function M(e){f=!0;const{offsetX:o,offsetY:a}=e;console.log("offsetX, offsetY",o,a),n.moveTo(o,a),n.strokeStyle="#000"}function x(e){if(!f)return;const{offsetX:o,offsetY:a}=e;n.lineTo(o,a),n.stroke()}function C(){f=!1,n.stroke()}function k(){n.clearRect(0,0,400,400)}function z(){p.drawImage(m,0,0,200,80)}return c(()=>{w.value=[""]}),D(()=>{w.value=[""]}),(e,o)=>{const a=S;return R(),T("div",q,[X(a,{title:"文件签名与画板功能",column:"",flowImg:g(U)},{default:Y(()=>[t("div",F,[t("div",P,[t("div",j,[t("canvas",{id:"main",width:s.size.width,height:s.size.height},null,8,A),t("div",{class:"floatboard",style:L({left:`${g(h)}px`,top:`${g(v)}px`}),onMounsedown:o[0]||(o[0]=(...i)=>e.dragMousedown&&e.dragMousedown(...i)),onMouseup:o[1]||(o[1]=(...i)=>e.dragMouseup&&e.dragMouseup(...i)),onMousemove:o[2]||(o[2]=(...i)=>e.dragMousemove&&e.dragMousemove(...i))},H,36)]),t("div",J,[t("canvas",{id:"sign",onMousedown:M,onMousemove:x,onMouseup:C},null,32),t("div",{style:{display:"flex","margin-top":"1rem"}},[t("button",{style:{"margin-right":"1rem"},onClick:z},"确认"),t("button",{onClick:k},"清除")])])]),t("div",{style:{display:"flex","margin-top":"1rem"}},[t("button",{style:{"margin-right":"1rem"},onClick:b},"保存"),t("button",{onClick:y},"清除")])])]),_:1},8,["flowImg"])])}}},oe=B(K,[["__scopeId","data-v-ef5b11cc"]]);export{oe as default};
