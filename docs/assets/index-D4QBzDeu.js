import{_ as C,g as I,r as h,O as $,o as l,c as i,F as w,v as x,H as v,l as y,E as F,P as B,y as V,Q as b,f as g,A as D,w as N,u as f,i as A,a as H,M as P}from"./index-CUZwWocw.js";import R from"./index-C7K3wd5E.js";const S=I({name:"RenderItems",props:{items:{type:Array,required:!0},parentIndex:{type:Array,default:[]},parentName:String},setup(t,{emit:s}){const u=h(t.items.map(r=>({...r,name:r.name,kind:r.kind,show:!1})));return console.log("data",u),{data:u,handleClick:(r,a)=>{a&&a.kind==="directory"?a.show=!a.show:s("click",r)}}}}),T={class:"file-list"},E=["onClick"],M=["onClick"];function j(t,s,u,m,r,a){const k=$("render-items");return l(),i("div",T,[(l(!0),i(w,null,x(t.data,(n,p)=>(l(),i("div",{key:p,class:"file-item"},[n.kind==="file"?(l(),i("div",{key:0,class:"file-item-file",onClick:v(e=>t.handleClick([...t.parentIndex,p],n),["stop"])}," 文件: "+y(n.name),9,E)):(l(),i("div",{key:1,class:F(["file-item-directory",{active:n.show}]),onClick:v(e=>t.handleClick([...t.parentIndex,p],n),["stop"])},[B(" 文件夹: "+y(n.name)+" ",1),V(g(k,{class:"file-list-child",items:n.children,"parent-index":[...t.parentIndex,p],"parent-name":n.name,onClick:t.handleClick},null,8,["items","parent-index","parent-name","onClick"]),[[b,n.children&&n.show]])],10,M))]))),128))])}const q=C(S,[["render",j],["__scopeId","data-v-c4d8293e"]]),z={key:0,class:"box-info"},L={key:1,class:"loading"},O={__name:"index",setup(t){const s=h([]),u=async e=>{if(e.kind==="file")return e;e.children=[];const o=await e.entries();for await(const c of o){const _=await u(c[1]);e.children.push(_)}return e},m=h(!1),r=async()=>{try{m.value=!0;const e=await showDirectoryPicker();s.value=await u(e),m.value=!1,console.log("root.value",s.value)}catch(e){console.log("err",e)}},a=h(""),k=h("javascript"),n=h(null),p=async e=>{let o=s.value.children;for(let d=0;d<e.length;d++)d<e.length-1?o=o[e[d]].children:o=o[e[d]];const c=await o.getFile();k.value=c.type.split("/")[1]||c.name.split(".")[1];const _=new FileReader;_.onload=d=>{a.value=d.target.result,n.value.showCode=!0},_.readAsText(c,"utf-8")};return(e,o)=>(l(),D(R,{column:"",ref_key:"iframeBox",ref:n,class:"ifrname-box box",needCode:!1,type:f(k),title:"文件夹获取",modelValue:f(a),"onUpdate:modelValue":o[0]||(o[0]=c=>A(a)?a.value=c:null)},{default:N(()=>[H("button",{onClick:v(r,["stop"])},"获取文件夹"),f(m)?(l(),i("div",L," 加载中，请稍后... ")):(l(),i(w,{key:0},[f(s)&&f(s).children&&f(s).children.length?(l(),i("div",z,[g(q,{class:"file",items:f(s).children,onClick:p},null,8,["items"])])):P("",!0)],64))]),_:1},8,["type","modelValue"]))}},G=C(O,[["__scopeId","data-v-44f6335b"]]);export{G as default};
