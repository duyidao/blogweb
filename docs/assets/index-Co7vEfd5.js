import{_ as C,f as I,r as h,O as $,o as r,c as i,F as w,v as x,H as v,k as y,E as F,P as B,y as V,Q as b,e as g,A as D,w as N,u as d,i as A,b as H,M as P}from"./index-yhPPJ2kp.js";import R from"./index-BJGdsuHK.js";const S=I({name:"RenderItems",props:{items:{type:Array,required:!0},parentIndex:{type:Array,default:[]},parentName:String},setup(s,{emit:t}){const f=h(s.items.map(l=>({...l,name:l.name,kind:l.kind,show:!1})));return console.log("data",f),{data:f,handleClick:(l,a)=>{a&&a.kind==="directory"?a.show=!a.show:t("click",l)}}}}),T={class:"file-list"},E=["onClick"],M=["onClick"];function j(s,t,f,k,l,a){const m=$("render-items");return r(),i("div",T,[(r(!0),i(w,null,x(s.data,(n,u)=>(r(),i("div",{key:u,class:"file-item"},[n.kind==="file"?(r(),i("div",{key:0,class:"file-item-file",onClick:v(e=>s.handleClick([...s.parentIndex,u],n),["stop"])}," 文件: "+y(n.name),9,E)):(r(),i("div",{key:1,class:F(["file-item-directory",{active:n.show}]),onClick:v(e=>s.handleClick([...s.parentIndex,u],n),["stop"])},[B(" 文件夹: "+y(n.name)+" ",1),V(g(m,{class:"file-list-child",items:n.children,"parent-index":[...s.parentIndex,u],"parent-name":n.name,onClick:s.handleClick},null,8,["items","parent-index","parent-name","onClick"]),[[b,n.children&&n.show]])],10,M))]))),128))])}const q=C(S,[["render",j],["__scopeId","data-v-c4d8293e"]]),z={key:0,class:"box-info"},L={key:1,class:"loading"},O={__name:"index",setup(s){const t=h([]),f=async e=>{if(e.kind==="file")return e;e.children=[];const o=await e.entries();for await(const p of o){const _=await f(p[1]);e.children.push(_)}return e},k=h(!1),l=async()=>{try{k.value=!0;const e=await showDirectoryPicker();t.value=await f(e),k.value=!1,console.log("root.value",t.value)}catch(e){console.log("err",e)}},a=h(""),m=h("javascript"),n=h(null),u=async e=>{let o=t.value.children;for(let c=0;c<e.length;c++)c<e.length-1?o=o[e[c]].children:o=o[e[c]];const p=await o.getFile();m.value=p.type.split("/")[1];const _=new FileReader;_.onload=c=>{a.value=c.target.result,n.value.showCode=!0},_.readAsText(p,"utf-8")};return(e,o)=>(r(),D(R,{column:"",ref_key:"iframeBox",ref:n,class:"ifrname-box box",needCode:!1,type:d(m),modelValue:d(a),"onUpdate:modelValue":o[0]||(o[0]=p=>A(a)?a.value=p:null)},{default:N(()=>[H("button",{onClick:v(l,["stop"])},"获取文件夹"),d(k)?(r(),i("div",L," 加载中，请稍后... ")):(r(),i(w,{key:0},[d(t)&&d(t).children&&d(t).children.length?(r(),i("div",z,[g(q,{class:"file",items:d(t).children,onClick:u},null,8,["items"])])):P("",!0)],64))]),_:1},8,["type","modelValue"]))}},G=C(O,[["__scopeId","data-v-f7d7a490"]]);export{G as default};
