import{_ as k}from"./index-DkFf666D.js";import{_ as v,r,o as c,h as y,w,a as g,D as x,u as l,c as f,F as C,j as F,N as B,k as V}from"./index-DnKoH_B6.js";import b from"./file-DguENIkZ.js";import"./index-Dd3Hebxp.js";import"./index-CJdXJ4Fi.js";const D={key:0,class:"box-info"},N={key:1,class:"loading"},I={__name:"index",setup(j){const o=r([]),d=async e=>{if(e.kind==="file")return e;e.children=[];const t=await e.entries();for await(const a of t){const n=await d(a[1]);e.children.push(n)}return e},u=r(!1),_=async()=>{try{u.value=!0;const e=await showDirectoryPicker();o.value=await d(e),u.value=!1,console.log("root.value",o.value)}catch(e){console.log("err",e)}},i=r(""),m=r("javascript"),p=r(null),h=async e=>{let t=o.value.children;for(let s=0;s<e.length;s++)s<e.length-1?t=t[e[s]].children:t=t[e[s]];const a=await t.getFile();m.value=a.type.split("/")[1]||a.name.split(".")[1];const n=new FileReader;n.onload=s=>{i.value=s.target.result,p.value.showCode=!0},n.readAsText(a,"utf-8")};return(e,t)=>{const a=k;return c(),y(a,{column:"",ref_key:"iframeBox",ref:p,class:"iframe-box box",needCode:!1,type:l(m),title:"文件夹获取",height:"600",modelValue:l(i),"onUpdate:modelValue":t[0]||(t[0]=n=>V(i)?i.value=n:null)},{default:w(()=>[g("button",{onClick:x(_,["stop"])},"获取文件夹"),l(u)?(c(),f("div",N," 加载中，请稍后... ")):(c(),f(C,{key:0},[l(o)&&l(o).children&&l(o).children.length?(c(),f("div",D,[F(b,{class:"file",items:l(o).children,onClick:h},null,8,["items"])])):B("",!0)],64))]),_:1},8,["type","modelValue"])}}},E=v(I,[["__scopeId","data-v-e0ec8338"]]);export{E as default};
