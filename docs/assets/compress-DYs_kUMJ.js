import{_ as p}from"./index-CW8OSvbF.js";import{_ as g,r as n,o as f,c as u,a as l,j as h,D as d}from"./index-BI5XnKsv.js";import"./index-kjZbcXqV.js";const v={setup(){const c=n(""),a=n({size:0,blobsize:0}),e=n(null),o=n(null);return{imgUrl:c,imgInfo:a,imgRef:e,compress:o,onChangeFn:i=>{let s=new FileReader;s.readAsDataURL(i),s.onload=_=>{c.value=s.result,a.value.size=_.total;let t=document.createElement("canvas");setTimeout(()=>{t.height=e.value.height,t.width=e.value.width,o.value.appendChild(t),t.getContext("2d").drawImage(e.value,0,0,e.value.width,e.value.height),t.toBlob(r=>{a.value.blobsize=r.size,new FormData().append("file",r)},"image/jpeg",.4)},1e3)}}}}},z={ref:"compress",class:"compress"},C={class:"compress-upload"},w={class:"info"},x=["src"];function b(c,a,e,o,m,i){const s=p;return f(),u("div",z,[l("div",C,[h(s,{onChange:o.onChangeFn},null,8,["onChange"])]),l("div",w,"原图大小："+d(o.imgInfo.size)+"，压缩后大小："+d(o.imgInfo.blobsize||0),1),l("img",{ref:"imgRef",src:o.imgUrl},null,8,x)],512)}const U=g(v,[["render",b],["__scopeId","data-v-ade1df47"]]);export{U as default};
