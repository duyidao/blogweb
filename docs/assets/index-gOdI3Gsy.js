import{_ as U}from"./index-DEQHi24b.js";import{c as $}from"./effect-DckGtECo.js";import{c as H}from"./likeme-GGPWDbUT.js";import{c as V}from"./peter-mI1k7hEE.js";import{_ as G,a as R}from"./shi-Ch9cTEql.js";import{_ as W,r as D,q as X,N as J,o as A,c as j,j as K,w as O,a as B,n as Q,u as k,F as Y,f as Z,z as oo}from"./index-DiqVLKRI.js";var q=function(c,l){return c<l?-1:c>l?1:0},F=function(c){return c.reduce(function(l,f){return l+f},0)},to=function(){function c(f){this.colors=f}var l=c.prototype;return l.palette=function(){return this.colors},l.map=function(f){return f},c}(),eo=function(){function c(t,o,r){return(t<<10)+(o<<5)+r}function l(t){var o=[],r=!1;function a(){o.sort(t),r=!0}return{push:function(n){o.push(n),r=!1},peek:function(n){return r||a(),n===void 0&&(n=o.length-1),o[n]},pop:function(){return r||a(),o.pop()},size:function(){return o.length},map:function(n){return o.map(n)},debug:function(){return r||a(),o}}}function f(t,o,r,a,n,e,u){var s=this;s.r1=t,s.r2=o,s.g1=r,s.g2=a,s.b1=n,s.b2=e,s.histo=u}function h(){this.vboxes=new l(function(t,o){return q(t.vbox.count()*t.vbox.volume(),o.vbox.count()*o.vbox.volume())})}function g(t,o){if(o.count()){var r=o.r2-o.r1+1,a=o.g2-o.g1+1,n=Math.max.apply(null,[r,a,o.b2-o.b1+1]);if(o.count()==1)return[o.copy()];var e,u,s,p,d=0,m=[],C=[];if(n==r)for(e=o.r1;e<=o.r2;e++){for(p=0,u=o.g1;u<=o.g2;u++)for(s=o.b1;s<=o.b2;s++)p+=t[c(e,u,s)]||0;m[e]=d+=p}else if(n==a)for(e=o.g1;e<=o.g2;e++){for(p=0,u=o.r1;u<=o.r2;u++)for(s=o.b1;s<=o.b2;s++)p+=t[c(u,e,s)]||0;m[e]=d+=p}else for(e=o.b1;e<=o.b2;e++){for(p=0,u=o.r1;u<=o.r2;u++)for(s=o.g1;s<=o.g2;s++)p+=t[c(u,s,e)]||0;m[e]=d+=p}return m.forEach(function(M,v){C[v]=d-M}),function(M){var v,w,b,x,_,I=M+"1",y=M+"2",E=0;for(e=o[I];e<=o[y];e++)if(m[e]>d/2){for(b=o.copy(),x=o.copy(),_=(v=e-o[I])<=(w=o[y]-e)?Math.min(o[y]-1,~~(e+w/2)):Math.max(o[I],~~(e-1-v/2));!m[_];)_++;for(E=C[_];!E&&m[_-1];)E=C[--_];return b[y]=_,x[I]=b[y]+1,[b,x]}}(n==r?"r":n==a?"g":"b")}}return f.prototype={volume:function(t){var o=this;return o._volume&&!t||(o._volume=(o.r2-o.r1+1)*(o.g2-o.g1+1)*(o.b2-o.b1+1)),o._volume},count:function(t){var o=this,r=o.histo;if(!o._count_set||t){var a,n,e,u=0;for(a=o.r1;a<=o.r2;a++)for(n=o.g1;n<=o.g2;n++)for(e=o.b1;e<=o.b2;e++)u+=r[c(a,n,e)]||0;o._count=u,o._count_set=!0}return o._count},copy:function(){var t=this;return new f(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(t){var o=this,r=o.histo;if(!o._avg||t){var a,n,e,u,s=0,p=0,d=0,m=0;if(o.r1===o.r2&&o.g1===o.g2&&o.b1===o.b2)o._avg=[o.r1<<3,o.g1<<3,o.b1<<3];else{for(n=o.r1;n<=o.r2;n++)for(e=o.g1;e<=o.g2;e++)for(u=o.b1;u<=o.b2;u++)s+=a=r[c(n,e,u)]||0,p+=a*(n+.5)*8,d+=a*(e+.5)*8,m+=a*(u+.5)*8;o._avg=s?[~~(p/s),~~(d/s),~~(m/s)]:[~~(8*(o.r1+o.r2+1)/2),~~(8*(o.g1+o.g2+1)/2),~~(8*(o.b1+o.b2+1)/2)]}}return o._avg},contains:function(t){var o=this,r=t[0]>>3;return gval=t[1]>>3,bval=t[2]>>3,r>=o.r1&&r<=o.r2&&gval>=o.g1&&gval<=o.g2&&bval>=o.b1&&bval<=o.b2}},h.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map(function(t){return t.color})},size:function(){return this.vboxes.size()},map:function(t){for(var o=this.vboxes,r=0;r<o.size();r++)if(o.peek(r).vbox.contains(t))return o.peek(r).color;return this.nearest(t)},nearest:function(t){for(var o,r,a,n=this.vboxes,e=0;e<n.size();e++)((r=Math.sqrt(Math.pow(t[0]-n.peek(e).color[0],2)+Math.pow(t[1]-n.peek(e).color[1],2)+Math.pow(t[2]-n.peek(e).color[2],2)))<o||o===void 0)&&(o=r,a=n.peek(e).color);return a},forcebw:function(){var t=this.vboxes;t.sort(function(n,e){return q(F(n.color),F(e.color))});var o=t[0].color;o[0]<5&&o[1]<5&&o[2]<5&&(t[0].color=[0,0,0]);var r=t.length-1,a=t[r].color;a[0]>251&&a[1]>251&&a[2]>251&&(t[r].color=[255,255,255])}},{quantize:function(t,o){if(!Number.isInteger(o)||o<1||o>256)throw new Error("Invalid maximum color count. It must be an integer between 1 and 256.");if(!t.length||o<2||o>256||!t.length||o<2||o>256)return!1;for(var r=[],a=new Set,n=0;n<t.length;n++){var e=t[n],u=e.join(",");a.has(u)||(a.add(u),r.push(e))}if(r.length<=o)return new to(r);var s=function(v){var w,b=new Array(32768);return v.forEach(function(x){w=c(x[0]>>3,x[1]>>3,x[2]>>3),b[w]=(b[w]||0)+1}),b}(t);s.forEach(function(){});var p=function(v,w){var b,x,_,I=1e6,y=0,E=1e6,L=0,T=1e6,N=0;return v.forEach(function(P){(b=P[0]>>3)<I?I=b:b>y&&(y=b),(x=P[1]>>3)<E?E=x:x>L&&(L=x),(_=P[2]>>3)<T?T=_:_>N&&(N=_)}),new f(I,y,E,L,T,N,w)}(t,s),d=new l(function(v,w){return q(v.count(),w.count())});function m(v,w){for(var b,x=v.size(),_=0;_<1e3;){if(x>=w||_++>1e3)return;if((b=v.pop()).count()){var I=g(s,b),y=I[0],E=I[1];if(!y)return;v.push(y),E&&(v.push(E),x++)}else v.push(b),_++}}d.push(p),m(d,.75*o);for(var C=new l(function(v,w){return q(v.count()*v.volume(),w.count()*w.volume())});d.size();)C.push(d.pop());m(C,o);for(var M=new h;C.size();)M.push(C.pop());return M}}}().quantize,S=function(c){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=c.naturalWidth,this.height=this.canvas.height=c.naturalHeight,this.context.drawImage(c,0,0,this.width,this.height)};S.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var z=function(){};z.prototype.getColor=function(c,l){return l===void 0&&(l=10),this.getPalette(c,5,l)[0]},z.prototype.getPalette=function(c,l,f){var h=function(r){var a=r.colorCount,n=r.quality;if(a!==void 0&&Number.isInteger(a)){if(a===1)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");a=Math.max(a,2),a=Math.min(a,20)}else a=10;return(n===void 0||!Number.isInteger(n)||n<1)&&(n=10),{colorCount:a,quality:n}}({colorCount:l,quality:f}),g=new S(c),t=function(r,a,n){for(var e,u,s,p,d,m=r,C=[],M=0;M<a;M+=n)u=m[0+(e=4*M)],s=m[e+1],p=m[e+2],((d=m[e+3])===void 0||d>=125)&&(u>250&&s>250&&p>250||C.push([u,s,p]));return C}(g.getImageData().data,g.width*g.height,h.quality),o=eo(t,h.colorCount);return o?o.palette():null},z.prototype.getColorFromUrl=function(c,l,f){var h=this,g=document.createElement("img");g.addEventListener("load",function(){var t=h.getPalette(g,5,f);l(t[0],c)}),g.src=c},z.prototype.getImageData=function(c,l){var f=new XMLHttpRequest;f.open("GET",c,!0),f.responseType="arraybuffer",f.onload=function(){if(this.status==200){var h=new Uint8Array(this.response);i=h.length;for(var g=new Array(i),t=0;t<h.length;t++)g[t]=String.fromCharCode(h[t]);var o=g.join(""),r=window.btoa(o);l("data:image/png;base64,"+r)}},f.send()},z.prototype.getColorAsync=function(c,l,f){var h=this;this.getImageData(c,function(g){var t=document.createElement("img");t.addEventListener("load",function(){var o=h.getPalette(t,5,f);l(o[0],this)}),t.src=g})};const no={class:"iframe-box box"},ro=["src","onMouseenter"],ao={__name:"index",setup(c){const l=new z,f=[H,V,G,R],h=D("transparent"),g=D(-1),t=async(r,a)=>{g.value=a;let n=await l.getColor(r,5);console.log("colors",n),h.value=`rgb(${n[0]}, ${n[1]}, ${n[2]})`,console.log("bgColor.value",h.value)},o=()=>{g.value=-1,h.value="transparent"};return X(()=>{$.value=[`import ColorThief from 'colorthief';
import img1 from '@/assets/img/music/likeme.webp';
import img2 from '@/assets/img/music/peter.webp';
import img3 from '@/assets/img/music/shape.webp';
import img4 from '@/assets/img/music/shi.webp';

const colorThief = new ColorThief();

const imgs = [img1, img2, img3, img4];
const bgColor = ref('transparent');

const hoverIndex = ref(-1);
const handlerMouseEnter = async (img, i) => {
  hoverIndex.value = i;
  let colors = await colorThief.getColor(img, 5);
  console.log('colors', colors)
  bgColor.value = \`rgb(\${colors[0]}, \${colors[1]}, \${colors[2]})\`;
  console.log('bgColor.value', bgColor.value);
}

const handlerMouseLeave = () => {
  hoverIndex.value = -1;
  bgColor.value = 'transparent';
}`]}),J(()=>{$.value=[""]}),(r,a)=>{const n=U;return A(),j("div",no,[K(n,null,{default:O(()=>[B("div",{class:"palette-imgs",style:Q({"--bg":k(h)})},[(A(),j(Y,null,Z(f,(e,u)=>B("img",{key:e,src:e,class:oo({active:k(g)===u,unactive:k(g)!==-1&&k(g)!==u}),onMouseenter:s=>t(s.target,u),onMouseleave:o},null,42,ro)),64))],4)]),_:1})])}}},go=W(ao,[["__scopeId","data-v-d7898837"]]);export{go as default};
