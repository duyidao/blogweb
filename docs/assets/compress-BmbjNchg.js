import{_ as p}from"./index-C6sBqCeB.js";import{_ as g,r as n,o as u,c as f,a as l,e as h,A as d}from"./index-BoT65t34.js";import"./index-_vRuoRk1.js";const v={setup(){const c=n(""),t=n({size:0,blobsize:0}),e=n(null),o=n(null);return{imgUrl:c,imgInfo:t,imgRef:e,compress:o,onChangeFn:i=>{let s=new FileReader;s.readAsDataURL(i),s.onload=_=>{c.value=s.result,t.value.size=_.total;let a=document.createElement("canvas");setTimeout(()=>{a.height=e.value.height,a.width=e.value.width,o.value.appendChild(a),a.getContext("2d").drawImage(e.value,0,0,e.value.width,e.value.height),a.toBlob(r=>{t.value.blobsize=r.size,new FormData().append("file",r)},"image/jpeg",.4)},1e3)}}}}},z={ref:"compress",class:"compress"},C={class:"compress-upload"},b={class:"info"},w=["src"];function x(c,t,e,o,m,i){const s=p;return u(),f("div",z,[l("div",C,[h(s,{onChange:o.onChangeFn},null,8,["onChange"])]),l("div",b,"原图大小："+d(o.imgInfo.size)+"，压缩后大小："+d(o.imgInfo.blobsize||0),1),l("img",{ref:"imgRef",src:o.imgUrl},null,8,w)],512)}const D=g(v,[["render",x],["__scopeId","data-v-aa1dd84b"]]);export{D as default};
