import{_ as C,g as I,r as m,O as $,o as l,c as i,F as w,v as x,H as v,l as y,E as F,P as B,y as V,Q as b,f as g,A as D,w as N,u as f,i as A,a as H,M as P}from"./index-ifJWoGPW.js";import R from"./index-DpVeJOIG.js";import"./index-B2g2asbn.js";const S=I({name:"RenderItems",props:{items:{type:Array,required:!0},parentIndex:{type:Array,default:[]},parentName:String},setup(n,{emit:s}){const p=m(n.items.map(r=>({...r,name:r.name,kind:r.kind,show:!1})));return console.log("data",p),{data:p,handleClick:(r,a)=>{a&&a.kind==="directory"?a.show=!a.show:s("click",r)}}}}),T={class:"file-list"},E=["onClick"],M=["onClick"];function j(n,s,p,h,r,a){const k=$("render-items");return l(),i("div",T,[(l(!0),i(w,null,x(n.data,(t,u)=>(l(),i("div",{key:u,class:"file-item"},[t.kind==="file"?(l(),i("div",{key:0,class:"file-item-file",onClick:v(e=>n.handleClick([...n.parentIndex,u],t),["stop"])}," 文件: "+y(t.name),9,E)):(l(),i("div",{key:1,class:F(["file-item-directory",{active:t.show}]),onClick:v(e=>n.handleClick([...n.parentIndex,u],t),["stop"])},[B(" 文件夹: "+y(t.name)+" ",1),V(g(k,{class:"file-list-child",items:t.children,"parent-index":[...n.parentIndex,u],"parent-name":t.name,onClick:n.handleClick},null,8,["items","parent-index","parent-name","onClick"]),[[b,t.children&&t.show]])],10,M))]))),128))])}const q=C(S,[["render",j],["__scopeId","data-v-c4d8293e"]]),z={key:0,class:"box-info"},L={key:1,class:"loading"},O={__name:"index",setup(n){const s=m([]),p=async e=>{if(e.kind==="file")return e;e.children=[];const o=await e.entries();for await(const c of o){const _=await p(c[1]);e.children.push(_)}return e},h=m(!1),r=async()=>{try{h.value=!0;const e=await showDirectoryPicker();s.value=await p(e),h.value=!1,console.log("root.value",s.value)}catch(e){console.log("err",e)}},a=m(""),k=m("javascript"),t=m(null),u=async e=>{let o=s.value.children;for(let d=0;d<e.length;d++)d<e.length-1?o=o[e[d]].children:o=o[e[d]];const c=await o.getFile();k.value=c.type.split("/")[1]||c.name.split(".")[1];const _=new FileReader;_.onload=d=>{a.value=d.target.result,t.value.showCode=!0},_.readAsText(c,"utf-8")};return(e,o)=>(l(),D(R,{column:"",ref_key:"iframeBox",ref:t,class:"ifrname-box box",needCode:!1,type:f(k),title:"文件夹获取",modelValue:f(a),"onUpdate:modelValue":o[0]||(o[0]=c=>A(a)?a.value=c:null)},{default:N(()=>[H("button",{onClick:v(r,["stop"])},"获取文件夹"),f(h)?(l(),i("div",L," 加载中，请稍后... ")):(l(),i(w,{key:0},[f(s)&&f(s).children&&f(s).children.length?(l(),i("div",z,[g(q,{class:"file",items:f(s).children,onClick:u},null,8,["items"])])):P("",!0)],64))]),_:1},8,["type","modelValue"]))}},J=C(O,[["__scopeId","data-v-44f6335b"]]);export{J as default};
