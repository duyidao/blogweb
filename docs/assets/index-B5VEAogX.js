import{_ as k}from"./index-DjaZ8iea.js";import{_ as v,r,o as c,k as y,w,u as l,i as g,a as x,O as F,c as f,e as C,V,F as b}from"./index-BoT65t34.js";import B from"./file-B5MTk4RT.js";const D={key:0,class:"box-info"},I={key:1,class:"loading"},N={__name:"index",setup(H){const o=r([]),d=async e=>{if(e.kind==="file")return e;e.children=[];const t=await e.entries();for await(const a of t){const n=await d(a[1]);e.children.push(n)}return e},u=r(!1),_=async()=>{try{u.value=!0;const e=await showDirectoryPicker();o.value=await d(e),u.value=!1,console.log("root.value",o.value)}catch(e){console.log("err",e)}},i=r(""),m=r("javascript"),p=r(null),h=async e=>{let t=o.value.children;for(let s=0;s<e.length;s++)s<e.length-1?t=t[e[s]].children:t=t[e[s]];const a=await t.getFile();m.value=a.type.split("/")[1]||a.name.split(".")[1];const n=new FileReader;n.onload=s=>{i.value=s.target.result,p.value.showCode=!0},n.readAsText(a,"utf-8")};return(e,t)=>{const a=k;return c(),y(a,{column:"",ref_key:"iframeBox",ref:p,class:"iframe-box box",needCode:!1,type:l(m),title:"文件夹获取",height:"600",modelValue:l(i),"onUpdate:modelValue":t[0]||(t[0]=n=>g(i)?i.value=n:null)},{default:w(()=>[x("button",{onClick:F(_,["stop"])},"获取文件夹"),l(u)?(c(),f("div",I," 加载中，请稍后... ")):(c(),f(b,{key:0},[l(o)&&l(o).children&&l(o).children.length?(c(),f("div",D,[C(B,{class:"file",items:l(o).children,onClick:h},null,8,["items"])])):V("",!0)],64))]),_:1},8,["type","modelValue"])}}},j=v(N,[["__scopeId","data-v-c5c6497b"]]);export{j as default};
