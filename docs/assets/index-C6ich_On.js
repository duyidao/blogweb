import{_ as I}from"./index-CA_JjYCt.js";import{_ as C,q as $,r as _,X as F,o as l,c as i,F as w,j as V,O as v,A as y,M as b,Y as x,D as B,Z as D,e as g,k as N,w as A,u as p,i as R,a as S,V as T}from"./index-w22fhRj8.js";const j=$({name:"RenderItems",props:{items:{type:Array,required:!0},parentIndex:{type:Array,default:[]},parentName:String},setup(t,{emit:s}){const u=_(t.items.map(r=>({...r,name:r.name,kind:r.kind,show:!1})));return console.log("data",u),{data:u,handleClick:(r,a)=>{a&&a.kind==="directory"?a.show=!a.show:s("click",r)}}}}),q={class:"file-list"},H=["onClick"],M=["onClick"];function P(t,s,u,h,r,a){const k=F("render-items");return l(),i("div",q,[(l(!0),i(w,null,V(t.data,(n,f)=>(l(),i("div",{key:f,class:"file-item"},[n.kind==="file"?(l(),i("div",{key:0,class:"file-item-file",onClick:v(e=>t.handleClick([...t.parentIndex,f],n),["stop"])}," 文件: "+y(n.name),9,H)):(l(),i("div",{key:1,class:b(["file-item-directory",{active:n.show}]),onClick:v(e=>t.handleClick([...t.parentIndex,f],n),["stop"])},[x(" 文件夹: "+y(n.name)+" ",1),B(g(k,{class:"file-list-child",items:n.children,"parent-index":[...t.parentIndex,f],"parent-name":n.name,onClick:t.handleClick},null,8,["items","parent-index","parent-name","onClick"]),[[D,n.children&&n.show]])],10,M))]))),128))])}const z=C(j,[["render",P],["__scopeId","data-v-eb9da960"]]),E={key:0,class:"box-info"},L={key:1,class:"loading"},O={__name:"index",setup(t){const s=_([]),u=async e=>{if(e.kind==="file")return e;e.children=[];const o=await e.entries();for await(const c of o){const m=await u(c[1]);e.children.push(m)}return e},h=_(!1),r=async()=>{try{h.value=!0;const e=await showDirectoryPicker();s.value=await u(e),h.value=!1,console.log("root.value",s.value)}catch(e){console.log("err",e)}},a=_(""),k=_("javascript"),n=_(null),f=async e=>{let o=s.value.children;for(let d=0;d<e.length;d++)d<e.length-1?o=o[e[d]].children:o=o[e[d]];const c=await o.getFile();k.value=c.type.split("/")[1]||c.name.split(".")[1];const m=new FileReader;m.onload=d=>{a.value=d.target.result,n.value.showCode=!0},m.readAsText(c,"utf-8")};return(e,o)=>{const c=I;return l(),N(c,{column:"",ref_key:"iframeBox",ref:n,class:"iframe-box box",needCode:!1,type:p(k),title:"文件夹获取",modelValue:p(a),"onUpdate:modelValue":o[0]||(o[0]=m=>R(a)?a.value=m:null)},{default:A(()=>[S("button",{onClick:v(r,["stop"])},"获取文件夹"),p(h)?(l(),i("div",L," 加载中，请稍后... ")):(l(),i(w,{key:0},[p(s)&&p(s).children&&p(s).children.length?(l(),i("div",E,[g(z,{class:"file",items:p(s).children,onClick:f},null,8,["items"])])):T("",!0)],64))]),_:1},8,["type","modelValue"])}}},Y=C(O,[["__scopeId","data-v-6cc3b979"]]);export{Y as default};
