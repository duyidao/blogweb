import{_ as p}from"./index-Dx-DPPpF.js";import{_ as g,r as l,o as m,c as u,b as a,e as _,k as x,S as w,u as f,y as C,I as b,p as $,d as I,H as R}from"./index-BEZXMryY.js";import{c as U}from"./peter-BaLBoidy.js";import"./index-DeohBAxm.js";const k={setup(){const c=l(""),o=l({size:0,blobsize:0}),e=l(null),t=l(null);return{imgUrl:c,imgInfo:o,imgRef:e,compress:t,onChangeFn:r=>{let s=new FileReader;s.readAsDataURL(r),s.onload=n=>{c.value=s.result,o.value.size=n.total;let i=document.createElement("canvas");setTimeout(()=>{i.height=e.value.height,i.width=e.value.width,t.value.appendChild(i),i.getContext("2d").drawImage(e.value,0,0,e.value.width,e.value.height),i.toBlob(d=>{o.value.blobsize=d.size,new FormData().append("file",d)},"image/jpeg",.4)},1e3)}}}}},y={ref:"compress",class:"compress"},F={class:"compress-upload"},S={class:"info"},D=["src"];function z(c,o,e,t,h,r){const s=p;return m(),u("div",y,[a("div",F,[_(s,{onChange:t.onChangeFn},null,8,["onChange"])]),a("div",S,"原图大小："+x(t.imgInfo.size)+"，压缩后大小："+x(t.imgInfo.blobsize||0),1),a("img",{ref:"imgRef",src:t.imgUrl},null,8,D)],512)}const B=g(k,[["render",z],["__scopeId","data-v-c7c4d903"]]),H={class:"tailor"},N={class:"tailor-upload"},V=["src"],A={__name:"tailor",setup(c){const o=l(""),e=l(null),t=l(null);l({imgWidth:0,imgHeight:0,canvasWidth:0,canvasHeight:0,scale:0,left:0,top:0});const h=r=>{let s=new FileReader;s.readAsDataURL(r),s.onload=()=>{o.value=s.result;let n=e.value.getContext("2d");setTimeout(()=>{let i=200/t.value.height*t.value.naturalHeight,v=200/t.value.width*t.value.naturalWidth;n.drawImage(t.value,0,0,v,i,0,0,200,200)},1e3)}};return(r,s)=>{const n=p;return m(),u("div",H,[a("div",N,[_(n,{onChange:h})]),a("div",null,[w(" 原图： "),a("img",{src:f(o),ref_key:"imgRef",ref:t},null,8,V)]),C(a("div",null,[w(" 裁剪： "),a("canvas",{ref_key:"canvasRef",ref:e,height:"200",width:"200"},null,512)],512),[[b,f(o)]])])}}},E=g(A,[["__scopeId","data-v-99195598"]]),L={setup(){return{imgUrl:l(""),saveScreen:()=>{}}}},T=c=>($("data-v-517e7994"),c=c(),I(),c),W={class:"tailor"},j=T(()=>a("img",{src:U},null,-1));function P(c,o,e,t,h,r){return m(),u("div",W,[a("button",{onClick:o[0]||(o[0]=(...s)=>t.saveScreen&&t.saveScreen(...s))},"截图"),j])}const q=g(L,[["render",P],["__scopeId","data-v-517e7994"]]),G={class:"filter-upload"},J=["src"],K={__name:"filter",setup(c){const o=l(""),e=l(null),t=l(null),h=s=>{let n=new FileReader;n.readAsDataURL(s),n.onload=()=>{o.value=n.result}},r=()=>{const s=document.createElement("canvas");s.height=e.value.height||"400px",s.width=e.value.width,t.value.appendChild(s);let n=s.getContext("2d");n.drawImage(e.value,0,0,e.value.width,e.value.height);let i=n.getImageData(0,0,e.value.width,e.value.height),v=i.data.length;for(let d=0;d<v;d++)d%2===0&&(i.data[d]=0);n.clearRect(0,0,e.value.width,e.value.height),n.putImageData(i,0,0)};return(s,n)=>{const i=p;return m(),u("div",{ref_key:"filter",ref:t,class:"filter"},[a("div",G,[_(i,{onChange:h})]),a("img",{src:f(o),ref_key:"imgRef",ref:e},null,8,J),f(o)?(m(),u("button",{key:0,onClick:r}," 点我添加滤镜 ")):R("",!0)],512)}}},M=g(K,[["__scopeId","data-v-9408764f"]]),O={class:"ifrname-box box"},Q={class:"box-item"},X=a("div",{class:"iframe-box-title"},"图片压缩",-1),Y={class:"box-item"},Z=a("div",{class:"iframe-box-title"},"页面截图",-1),ee={class:"box-item"},te=a("div",{class:"iframe-box-title"},"滤镜",-1),se={class:"box-item"},ae=a("div",{class:"iframe-box-title"},"图片裁剪",-1),re={__name:"index",setup(c){return(o,e)=>(m(),u("div",O,[a("div",Q,[X,_(B)]),a("div",Y,[Z,_(q)]),a("div",ee,[te,_(M)]),a("div",se,[ae,_(E)])]))}};export{re as default};
