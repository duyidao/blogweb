import{_ as j}from"./index-DAzLeqpq.js";import{r as l,o as d,B,s as V,b as p,w as D,u as a,a as g,n as L,q as M,d as N,j as k,O as y,x as H}from"./vender-BxpIRFvU.js";import P from"./file-CWFAtwZX.js";import{_ as z}from"./index-BiYuigne.js";import"./index-CtTSrexQ.js";import"./rem-D2iYkbWd.js";import"./index-DavKPrte.js";const A="/blogweb/assets/showDirectoryPicker-zHfn__NG.png",T={key:0,class:"box-file"},U={key:1,class:"loading"},q={__name:"index",setup(E){const n=l([]),w=async e=>{if(e.kind==="file")return e;e.children=[];const s=await e.entries();for await(const o of s){const t=await w(o[1]);e.children.push(t)}return e},m=l(!1),b=async()=>{try{m.value=!0;const e=await showDirectoryPicker();n.value=await w(e),m.value=!1}catch(e){console.warn("err",e)}},c=l(""),i=l("javascript"),v=l(null),_=l(null),u=l(null),r=l(!1),f=l(!1),x=["vue","css","javascript","html","json","jsx"],h=["png","jpg","jpeg","gif","svg","avif","webp"],C=["mp4","akv","rmb","mov","avi","flv","wmv","mkv"],I=e=>{r.value=!1,f.value=!1;const s=new FileReader;s.onload=o=>{c.value=o.target.result,v.value.showCode=!0},s.readAsText(e,"utf-8")},F=e=>{v.value.showCode=!1,f.value=!1,r.value=!1;const s=new FileReader;s.readAsDataURL(e),s.onload=o=>{console.log("e",o),h.includes(i.value)?(_.value.src=o.target.result,r.value=!0):(f.value=!0,u.value.src=o.target.result,u.value.load(),u.value.play().catch(t=>{console.warn("自动播放被阻止:",t)}))}},R=async e=>{let s=n.value.children;for(let t=0;t<e.length;t++)t<e.length-1?s=s[e[t]].children:s=s[e[t]];if(!s.getFile)return;const o=await s.getFile();console.log("file",o),i.value=o.type.split("/")[1]||o.name.split(".")[1],x.includes(i.value)&&I(o),(h.includes(i.value)||C.includes(i.value))&&F(o)};return(e,s)=>{const o=j;return d(),B(o,{column:"",ref_key:"iframeBox",ref:v,class:"iframe-box box",needCode:!1,type:a(i),title:"文件夹获取",height:"600",flowImg:a(A),modelValue:a(c),"onUpdate:modelValue":s[0]||(s[0]=t=>H(c)?c.value=t:null)},{default:V(()=>[p("button",{onClick:D(b,["stop"])},"获取文件夹"),a(m)?(d(),g("div",U," 加载中，请稍后... ")):(d(),g("div",T,[a(n)&&a(n).children&&a(n).children.length?(d(),g("div",{key:0,class:L(["box-info",{showImg:a(r)}])},[M(P,{class:"file",items:a(n).children,onClick:R},null,8,["items"])],2)):N("",!0),k(p("img",{ref_key:"imgRef",ref:_,src:""},null,512),[[y,a(r)]]),k(p("video",{ref_key:"videoRef",ref:u,src:""},null,512),[[y,a(f)]])]))]),_:1},8,["type","flowImg","modelValue"])}}},X=z(q,[["__scopeId","data-v-a3fd0aba"]]);export{X as default};
