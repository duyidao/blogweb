import{_ as U}from"./index-GbGEU4tk.js";import{f as H}from"./filter-B5Dajvdp.js";import{c as D}from"./effect-Bt9OKxTa.js";import{c as V}from"./likeme-GGPWDbUT.js";import{c as G}from"./peter-mI1k7hEE.js";import{_ as R,a as W}from"./shi-Ch9cTEql.js";import{_ as X,r as N,q as J,M as K,o as A,c as j,j as O,w as Q,a as B,n as Y,u as k,F as Z,f as oo,z as to}from"./index-DA_VNGs7.js";var q=function(c,l){return c<l?-1:c>l?1:0},F=function(c){return c.reduce(function(l,f){return l+f},0)},eo=function(){function c(f){this.colors=f}var l=c.prototype;return l.palette=function(){return this.colors},l.map=function(f){return f},c}(),no=function(){function c(t,o,r){return(t<<10)+(o<<5)+r}function l(t){var o=[],r=!1;function a(){o.sort(t),r=!0}return{push:function(n){o.push(n),r=!1},peek:function(n){return r||a(),n===void 0&&(n=o.length-1),o[n]},pop:function(){return r||a(),o.pop()},size:function(){return o.length},map:function(n){return o.map(n)},debug:function(){return r||a(),o}}}function f(t,o,r,a,n,e,u){var s=this;s.r1=t,s.r2=o,s.g1=r,s.g2=a,s.b1=n,s.b2=e,s.histo=u}function p(){this.vboxes=new l(function(t,o){return q(t.vbox.count()*t.vbox.volume(),o.vbox.count()*o.vbox.volume())})}function g(t,o){if(o.count()){var r=o.r2-o.r1+1,a=o.g2-o.g1+1,n=Math.max.apply(null,[r,a,o.b2-o.b1+1]);if(o.count()==1)return[o.copy()];var e,u,s,h,d=0,m=[],C=[];if(n==r)for(e=o.r1;e<=o.r2;e++){for(h=0,u=o.g1;u<=o.g2;u++)for(s=o.b1;s<=o.b2;s++)h+=t[c(e,u,s)]||0;m[e]=d+=h}else if(n==a)for(e=o.g1;e<=o.g2;e++){for(h=0,u=o.r1;u<=o.r2;u++)for(s=o.b1;s<=o.b2;s++)h+=t[c(u,e,s)]||0;m[e]=d+=h}else for(e=o.b1;e<=o.b2;e++){for(h=0,u=o.r1;u<=o.r2;u++)for(s=o.g1;s<=o.g2;s++)h+=t[c(u,s,e)]||0;m[e]=d+=h}return m.forEach(function(I,v){C[v]=d-I}),function(I){var v,_,b,x,w,M=I+"1",y=I+"2",E=0;for(e=o[M];e<=o[y];e++)if(m[e]>d/2){for(b=o.copy(),x=o.copy(),w=(v=e-o[M])<=(_=o[y]-e)?Math.min(o[y]-1,~~(e+_/2)):Math.max(o[M],~~(e-1-v/2));!m[w];)w++;for(E=C[w];!E&&m[w-1];)E=C[--w];return b[y]=w,x[M]=b[y]+1,[b,x]}}(n==r?"r":n==a?"g":"b")}}return f.prototype={volume:function(t){var o=this;return o._volume&&!t||(o._volume=(o.r2-o.r1+1)*(o.g2-o.g1+1)*(o.b2-o.b1+1)),o._volume},count:function(t){var o=this,r=o.histo;if(!o._count_set||t){var a,n,e,u=0;for(a=o.r1;a<=o.r2;a++)for(n=o.g1;n<=o.g2;n++)for(e=o.b1;e<=o.b2;e++)u+=r[c(a,n,e)]||0;o._count=u,o._count_set=!0}return o._count},copy:function(){var t=this;return new f(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(t){var o=this,r=o.histo;if(!o._avg||t){var a,n,e,u,s=0,h=0,d=0,m=0;if(o.r1===o.r2&&o.g1===o.g2&&o.b1===o.b2)o._avg=[o.r1<<3,o.g1<<3,o.b1<<3];else{for(n=o.r1;n<=o.r2;n++)for(e=o.g1;e<=o.g2;e++)for(u=o.b1;u<=o.b2;u++)s+=a=r[c(n,e,u)]||0,h+=a*(n+.5)*8,d+=a*(e+.5)*8,m+=a*(u+.5)*8;o._avg=s?[~~(h/s),~~(d/s),~~(m/s)]:[~~(8*(o.r1+o.r2+1)/2),~~(8*(o.g1+o.g2+1)/2),~~(8*(o.b1+o.b2+1)/2)]}}return o._avg},contains:function(t){var o=this,r=t[0]>>3;return gval=t[1]>>3,bval=t[2]>>3,r>=o.r1&&r<=o.r2&&gval>=o.g1&&gval<=o.g2&&bval>=o.b1&&bval<=o.b2}},p.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map(function(t){return t.color})},size:function(){return this.vboxes.size()},map:function(t){for(var o=this.vboxes,r=0;r<o.size();r++)if(o.peek(r).vbox.contains(t))return o.peek(r).color;return this.nearest(t)},nearest:function(t){for(var o,r,a,n=this.vboxes,e=0;e<n.size();e++)((r=Math.sqrt(Math.pow(t[0]-n.peek(e).color[0],2)+Math.pow(t[1]-n.peek(e).color[1],2)+Math.pow(t[2]-n.peek(e).color[2],2)))<o||o===void 0)&&(o=r,a=n.peek(e).color);return a},forcebw:function(){var t=this.vboxes;t.sort(function(n,e){return q(F(n.color),F(e.color))});var o=t[0].color;o[0]<5&&o[1]<5&&o[2]<5&&(t[0].color=[0,0,0]);var r=t.length-1,a=t[r].color;a[0]>251&&a[1]>251&&a[2]>251&&(t[r].color=[255,255,255])}},{quantize:function(t,o){if(!Number.isInteger(o)||o<1||o>256)throw new Error("Invalid maximum color count. It must be an integer between 1 and 256.");if(!t.length||o<2||o>256||!t.length||o<2||o>256)return!1;for(var r=[],a=new Set,n=0;n<t.length;n++){var e=t[n],u=e.join(",");a.has(u)||(a.add(u),r.push(e))}if(r.length<=o)return new eo(r);var s=function(v){var _,b=new Array(32768);return v.forEach(function(x){_=c(x[0]>>3,x[1]>>3,x[2]>>3),b[_]=(b[_]||0)+1}),b}(t);s.forEach(function(){});var h=function(v,_){var b,x,w,M=1e6,y=0,E=1e6,L=0,T=1e6,P=0;return v.forEach(function($){(b=$[0]>>3)<M?M=b:b>y&&(y=b),(x=$[1]>>3)<E?E=x:x>L&&(L=x),(w=$[2]>>3)<T?T=w:w>P&&(P=w)}),new f(M,y,E,L,T,P,_)}(t,s),d=new l(function(v,_){return q(v.count(),_.count())});function m(v,_){for(var b,x=v.size(),w=0;w<1e3;){if(x>=_||w++>1e3)return;if((b=v.pop()).count()){var M=g(s,b),y=M[0],E=M[1];if(!y)return;v.push(y),E&&(v.push(E),x++)}else v.push(b),w++}}d.push(h),m(d,.75*o);for(var C=new l(function(v,_){return q(v.count()*v.volume(),_.count()*_.volume())});d.size();)C.push(d.pop());m(C,o);for(var I=new p;C.size();)I.push(C.pop());return I}}}().quantize,S=function(c){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=c.naturalWidth,this.height=this.canvas.height=c.naturalHeight,this.context.drawImage(c,0,0,this.width,this.height)};S.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var z=function(){};z.prototype.getColor=function(c,l){return l===void 0&&(l=10),this.getPalette(c,5,l)[0]},z.prototype.getPalette=function(c,l,f){var p=function(r){var a=r.colorCount,n=r.quality;if(a!==void 0&&Number.isInteger(a)){if(a===1)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");a=Math.max(a,2),a=Math.min(a,20)}else a=10;return(n===void 0||!Number.isInteger(n)||n<1)&&(n=10),{colorCount:a,quality:n}}({colorCount:l,quality:f}),g=new S(c),t=function(r,a,n){for(var e,u,s,h,d,m=r,C=[],I=0;I<a;I+=n)u=m[0+(e=4*I)],s=m[e+1],h=m[e+2],((d=m[e+3])===void 0||d>=125)&&(u>250&&s>250&&h>250||C.push([u,s,h]));return C}(g.getImageData().data,g.width*g.height,p.quality),o=no(t,p.colorCount);return o?o.palette():null},z.prototype.getColorFromUrl=function(c,l,f){var p=this,g=document.createElement("img");g.addEventListener("load",function(){var t=p.getPalette(g,5,f);l(t[0],c)}),g.src=c},z.prototype.getImageData=function(c,l){var f=new XMLHttpRequest;f.open("GET",c,!0),f.responseType="arraybuffer",f.onload=function(){if(this.status==200){var p=new Uint8Array(this.response);i=p.length;for(var g=new Array(i),t=0;t<p.length;t++)g[t]=String.fromCharCode(p[t]);var o=g.join(""),r=window.btoa(o);l("data:image/png;base64,"+r)}},f.send()},z.prototype.getColorAsync=function(c,l,f){var p=this;this.getImageData(c,function(g){var t=document.createElement("img");t.addEventListener("load",function(){var o=p.getPalette(t,5,f);l(o[0],this)}),t.src=g})};const ro={class:"iframe-box box"},ao=["src","onMouseenter"],io={__name:"index",setup(c){const l=new z,f=[V,G,R,W],p=N("transparent"),g=N(-1),t=async(r,a)=>{g.value=a;let n=await l.getColor(r,5);p.value=`rgb(${n[0]}, ${n[1]}, ${n[2]})`},o=()=>{g.value=-1,p.value="transparent"};return J(()=>{D.value=[`import ColorThief from 'colorthief';
import img1 from '@/assets/img/music/likeme.webp';
import img2 from '@/assets/img/music/peter.webp';
import img3 from '@/assets/img/music/shape.webp';
import img4 from '@/assets/img/music/shi.webp';

const colorThief = new ColorThief();

const imgs = [img1, img2, img3, img4];
const bgColor = ref('transparent');

const hoverIndex = ref(-1);
const handlerMouseEnter = async (img, i) => {
  hoverIndex.value = i;
  let colors = await colorThief.getColor(img, 5);
  console.log('colors', colors)
  bgColor.value = \`rgb(\${colors[0]}, \${colors[1]}, \${colors[2]})\`;
  console.log('bgColor.value', bgColor.value);
}

const handlerMouseLeave = () => {
  hoverIndex.value = -1;
  bgColor.value = 'transparent';
}`]}),K(()=>{D.value=[""]}),(r,a)=>{const n=U;return A(),j("div",ro,[O(n,{flowImg:k(H)},{default:Q(()=>[B("div",{class:"palette-imgs",style:Y({"--bg":k(p)})},[(A(),j(Z,null,oo(f,(e,u)=>B("img",{key:e,src:e,class:to({active:k(g)===u,unactive:k(g)!==-1&&k(g)!==u}),onMouseenter:s=>t(s.target,u),onMouseleave:o},null,42,ao)),64))],4)]),_:1},8,["flowImg"])])}}},ho=X(io,[["__scopeId","data-v-9cd0bf48"]]);export{ho as default};
